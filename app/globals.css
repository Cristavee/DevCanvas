@import url('https://fonts.googleapis.com/css2?family=Geist:wght@300;400;500;600;700;800;900&family=Geist+Mono:wght@300;400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─────────────────────────────────────────
   ROOT RESET & VIEWPORT FIX
   ───────────────────────────────────────── */
html {
  /* Prevent text size adjust on orientation change (iOS) */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Force correct box sizing everywhere */
  box-sizing: border-box;
  /* Prevent horizontal scroll */
  overflow-x: hidden;
  /* Use logical pixel width, not physical */
  width: 100%;
  height: 100%;
}

*, *::before, *::after {
  box-sizing: inherit;
  margin: 0;
  padding: 0;
}

body {
  font-family: var(--font-sans);
  background-color: hsl(var(--background));
  color: hsl(var(--foreground));
  /* Critical: prevent horizontal overflow on ALL devices */
  overflow-x: hidden;
  width: 100%;
  min-height: 100%;
  min-height: 100dvh;
}

/* ─────────────────────────────────────────
   CSS VARIABLES — LIGHT THEME
   ───────────────────────────────────────── */
:root {
  --radius: 0.625rem;
  --font-sans: 'Geist', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  --font-mono: 'Geist Mono', 'Fira Code', 'JetBrains Mono', monospace;

  --background:       222 47% 6%;
  --surface:          222 41% 9%;
  --foreground:       210 40% 96%;
  --muted:            222 30% 14%;
  --muted-foreground: 215 20% 52%;
  --border:           222 28% 16%;
  --input:            222 28% 16%;
  --ring:             164 100% 42%;
  --primary:          164 100% 50%;
  --primary-foreground: 222 47% 6%;
  --accent:           210 100% 60%;
  --accent-foreground: 222 47% 6%;
  --secondary:        222 30% 14%;
  --secondary-foreground: 210 40% 92%;
  --card:             222 41% 9%;
  --card-foreground:  210 40% 96%;
  --popover:          222 38% 10%;
  --popover-foreground: 210 40% 96%;
  --destructive:      0 72% 55%;
  --destructive-foreground: 0 0% 100%;
  --success:          142 65% 48%;
  --warning:          38 88% 55%;
  --sidebar-bg:       222 50% 4%;
  --sidebar-border:   222 28% 12%;

  /* Accent colors */
  --neon: #00FFB3;
  --neon-dim: rgba(0, 255, 179, 0.08);
  --neon-glow: rgba(0, 255, 179, 0.25);
  --blue: #4DABFF;
  --blue-dim: rgba(77, 171, 255, 0.08);

  /* Layout dimensions */
  --sidebar-width: 240px;
  --header-h: 52px;
  --bottomnav-h: 56px;
}

/* ─────────────────────────────────────────
   SCROLLBAR
   ───────────────────────────────────────── */
::-webkit-scrollbar { width: 3px; height: 3px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: hsl(var(--border)); border-radius: 9999px; }

/* ─────────────────────────────────────────
   GLASS EFFECT
   ───────────────────────────────────────── */
.glass {
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  background: rgba(7, 9, 18, 0.85);
  border-bottom: 1px solid hsl(var(--border));
}

/* ─────────────────────────────────────────
   NEON STATUS DOTS
   ───────────────────────────────────────── */
.dot-online {
  background: var(--neon);
  box-shadow: 0 0 0 2px hsl(var(--background)), 0 0 6px var(--neon);
}
.dot-offline { background: hsl(var(--muted-foreground)); }

/* ─────────────────────────────────────────
   GRID / DOT PATTERNS
   ───────────────────────────────────────── */
.grid-pattern {
  background-image:
    linear-gradient(hsl(var(--border)) 1px, transparent 1px),
    linear-gradient(90deg, hsl(var(--border)) 1px, transparent 1px);
  background-size: 40px 40px;
}
.dot-pattern {
  background-image: radial-gradient(circle, hsl(var(--border)) 1px, transparent 1px);
  background-size: 24px 24px;
}

/* ─────────────────────────────────────────
   ANIMATIONS
   ───────────────────────────────────────── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.94); }
  to   { opacity: 1; transform: scale(1); }
}
@keyframes slideLeft {
  from { transform: translateX(-100%); }
  to   { transform: translateX(0); }
}
@keyframes slideRight {
  from { transform: translateX(0); }
  to   { transform: translateX(-100%); }
}
@keyframes neonPulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.35; }
}
@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
@keyframes spin { to { transform: rotate(360deg); } }

.animate-fade-up  { animation: fadeUp 0.3s ease-out forwards; }
.animate-scale-in { animation: scaleIn 0.2s ease-out forwards; }
.animate-neon     { animation: neonPulse 2s ease-in-out infinite; }

/* Skeleton loader */
.skeleton {
  background: linear-gradient(
    90deg,
    hsl(var(--muted)) 25%,
    hsl(var(--border)) 50%,
    hsl(var(--muted)) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.4s infinite;
  border-radius: var(--radius);
}

/* ─────────────────────────────────────────
   MOBILE LAYOUT STRUCTURE
   ───────────────────────────────────────── */

/* On mobile: content fills full width */
.layout-content {
  width: 100%;
  max-width: 100%;
}

/* On desktop: content shifts right of sidebar */
@media (min-width: 1024px) {
  .layout-content {
    margin-left: var(--sidebar-width);
    width: calc(100% - var(--sidebar-width));
    max-width: calc(100% - var(--sidebar-width));
  }
}

/* Mobile inner padding accounting for header + bottom nav */
.page-padding-mobile {
  padding-top: calc(var(--header-h) + 12px);
  padding-bottom: calc(var(--bottomnav-h) + 12px);
  padding-left: 16px;
  padding-right: 16px;
}

@media (min-width: 1024px) {
  .page-padding-mobile {
    padding-top: calc(var(--header-h) + 24px);
    padding-bottom: 32px;
    padding-left: 32px;
    padding-right: 32px;
  }
}

/* ─────────────────────────────────────────
   FONT ALIASES
   ───────────────────────────────────────── */
.font-sans { font-family: var(--font-sans); }
.font-mono { font-family: var(--font-mono); }

/* ─────────────────────────────────────────
   TOUCH IMPROVEMENTS
   ───────────────────────────────────────── */
button, a, [role="button"] {
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

/* Minimum touch target size (WCAG 2.5.5) */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ─────────────────────────────────────────
   CODE BLOCK
   ───────────────────────────────────────── */
.code-window {
  background: #0d1117;
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid #30363d;
}
.code-titlebar {
  background: #161b22;
  border-bottom: 1px solid #30363d;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  gap: 8px;
}
.traffic-light { width: 10px; height: 10px; border-radius: 50%; }
.tl-red    { background: #FF5F57; }
.tl-yellow { background: #FEBC2E; }
.tl-green  { background: #28C840; }
